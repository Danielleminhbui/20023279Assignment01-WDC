<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <body>
    <p>Hello World</p>

    <button onClick="question6()">click me</button>
    <button onClick="question7()">sort</button>

    <table id="table"></table>
    <script>
      const users = [
        {
          uid: 001,
          email: "john@dev.com",
          personalInfo: {
            name: "John",
            address: {
              line1: "westwish st",
              line2: "washmasher",
              city: "wallas",
              state: "WX",
            },
          },
        },
        {
          uid: 063,
          email: "a.abken@larobe.edu.au",
          personalInfo: {
            name: "amin",
            address: {
              line1: "Heidelberg",
              line2: "",
              city: "Melbourne",
              state: "VIC",
            },
          },
        },
        {
          uid: 045,
          email: "Linda.Paterson@gmail.com",
          personalInfo: {
            name: "Linda",
            address: {
              line1: "Cherry st",
              line2: "Kangaroo Point",
              city: "Brisbane",
              state: "QLD",
            },
          },
        },
      ];

      //question 5
      function returnUsers(users) {
        const result = users.map(({ personalInfo, email }) => [
          personalInfo.name,
          email,
          personalInfo.address.state,
        ]);
        return result;
      }

      // for question 6
      var data = returnUsers(users);

      function question6() {
        createTable(data);
      }

      function createTable(data) {
        var table = document.getElementById("table");
        var tableBody = document.createElement("tbody");

        data.forEach(function (rowData) {
          var row = document.createElement("tr");

          rowData.forEach(function (cellData) {
            var cell = document.createElement("td");
            cell.appendChild(document.createTextNode(cellData));
            row.appendChild(cell);
          });

          tableBody.appendChild(row);
        });

        table.appendChild(tableBody);
      }

      // question 7
      function compare(a, b) {
        return a
          .toString()
          .toLowerCase()
          .localeCompare(b.toString().toLowerCase());
      }
      function question7() {
        var sortedData = data.sort(compare);
        var table = document.getElementById("table");
        table.innerHTML = "";

        createTable(sortedData);
      }
    </script>
  </body>
</html>
